(this["webpackJsonpredux-saga-poc"]=this["webpackJsonpredux-saga-poc"]||[]).push([[0],{40:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},46:function(e,t,n){e.exports=n(76)},51:function(e,t,n){},52:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(14),s=n.n(c),o=(n(51),n(43)),i=n(40),u=n.n(i),l=(n(52),n(26)),E=n.n(l),p=n(22),f=function(e){return E.a.get(e)},_=function(e){return{type:"FETCH_USER_INCREMENTAL_SUCCESS",payload:e}},d=function(e){return{type:"SAGA_FETCH_USER_SUCCESS",payload:e}},S=n(94),m=n(93),b=function(){var e=Object(p.b)(),t=Object(r.useState)(1),n=Object(o.a)(t,2),c=n[0],s=n[1],i=Object(p.c)((function(e){return e.isExpensiveTaskRunning})),l="https://jsonplaceholder.typicode.com/todos/".concat(c),d=function(){s(2===c?1:c+1)};return a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},a.a.createElement("p",null,"As a general rule of thumb:"),a.a.createElement("div",{style:{fontSize:18}},a.a.createElement("p",null,"Thunks are best for complex synchronous logic (especially code that needs access to the entire Redux store state), and simple async logic (like basic AJAX calls). With the use of async/await, it can be reasonable to use thunks for some more complex promise-based logic as well."),a.a.createElement("br",null),a.a.createElement("p",null,'Sagas are best for complex async logic and decoupled "background thread"-type behavior, especially if you need to listen to dispatched actions (which is something that can\'t be done with thunks). They require familiarity with ES6 generator functions and redux-saga\'s "effects" operators.'),a.a.createElement("br",null),a.a.createElement("p",null,"Observables solve the same problems as sagas, but rely on RxJS to implement async behavior. They require familiarity with the RxJS API.")),a.a.createElement("img",{src:u.a,className:"App-logo",alt:"logo"}),a.a.createElement(m.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:3},a.a.createElement(m.a,{item:!0},a.a.createElement(S.a,{variant:"contained",color:"primary",component:"span",onClick:function(){e({type:"FETCH_USER_INCREMENTAL_INIT"}),E.a.get(l).then((function(t){var n=t.data;e(_(n)),d()})).catch((function(t){e({type:"FETCH_USER_INCREMENTAL_FAIL"}),console.error(t)}))}},"Fetch User")),a.a.createElement(m.a,{item:!0},a.a.createElement(S.a,{variant:"contained",color:"primary",component:"span",onClick:function(){e(function(e){return function(t){t({type:"FETCH_USER_INCREMENTAL_INIT"}),f(e).then((function(e){var n=e.data;t(_(n))})).catch((function(e){t({type:"FETCH_USER_INCREMENTAL_FAIL"}),console.error(e)}))}}(l)),d()}},"Fetch User (thunk)")),a.a.createElement(m.a,{item:!0},a.a.createElement(S.a,{variant:"contained",color:"primary",component:"span",onClick:function(){e({type:"SAGA_FETCH_USER_INIT",payload:l}),d()}},"Fetch User (saga)")),a.a.createElement(m.a,{item:!0},a.a.createElement(S.a,{variant:"contained",color:"primary",component:"span",onClick:function(){e({type:"SAGA_FETCH_USER_WITH_TIMEOUT_INIT",payload:l}),d()}},"Fetch User (saga + timeout)")),a.a.createElement(m.a,{item:!0},a.a.createElement(S.a,{variant:"contained",color:"primary",component:"span",onClick:function(){e({type:"SAGA_FETCH_TWO_USERS_RACE",payload:{firstUserUrl:"https://jsonplaceholder.typicode.com/todos/1",secondUserUrl:"https://jsonplaceholder.typicode.com/todos/2"}})}},"Fetch Two Users (saga + race)")),a.a.createElement(m.a,{item:!0},a.a.createElement(S.a,{variant:"contained",color:"primary",component:"span",onClick:function(){e(i?{type:"EXPENSIVE_TASK_CANCEL"}:{type:"EXPENSIVE_TASK_INIT"})}},i?"stop expensive task":"start expensive task")))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var h=n(16),x=n(42),T=n(44),A=n(24),O=n(23),C=function(e,t){return Object(A.a)(Object(A.a)({},e),t)},v={isLoading:!1,users:[],isExpensiveTaskRunning:!1},j=function(e){var t=Object(A.a)({},e);return t.isLoading=!0,C(e,t)},g=function(e,t){var n=Object(O.cloneDeep)(e);return n.users=n.users.concat([t]),n.isLoading=!1,C(e,n)},I=function(e){var t=Object(O.cloneDeep)(e);return t.isLoading=!1,t.users=[],C(e,t)},y=function(e){var t=Object(A.a)({},e);return t.isLoading=!0,C(e,t)},U=function(e,t){var n=Object(O.cloneDeep)(e);return n.users=n.users.concat([t]),n.isLoading=!1,C(e,n)},k=function(e){var t=Object(O.cloneDeep)(e);return t.isLoading=!1,t.users=[],C(e,t)},w=function(e){return C(e,{isExpensiveTaskRunning:!0})},N=function(e){return C(e,{isExpensiveTaskRunning:!1})},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USER_INCREMENTAL_INIT":return j(e);case"FETCH_USER_INCREMENTAL_SUCCESS":return g(e,t.payload);case"FETCH_USER_INCREMENTAL_FAIL":return I(e);case"SAGA_FETCH_USER_INIT":return y(e);case"SAGA_FETCH_USER_SUCCESS":return U(e,t.payload);case"SAGA_FETCH_USER_FAIL":return k();case"EXPENSIVE_TASK_INIT":return w(e);case"EXPENSIVE_TASK_COMPLETED":case"EXPENSIVE_TASK_CANCEL":return N(e);default:return e}},F=n(6),L=n.n(F),H=n(4),G=L.a.mark(Q),M=L.a.mark(Y),P=L.a.mark(Z),X=L.a.mark(ee),D=L.a.mark(te),V=L.a.mark(ne),K=L.a.mark(re),W=L.a.mark(ae),J=L.a.mark(ce),q=L.a.mark(se),z=L.a.mark(oe),B=L.a.mark(ie),$=L.a.mark(ue);function Q(e){var t,n;return L.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.prev=1,r.next=4,Object(H.a)(f,t);case 4:return n=r.sent,r.next=7,Object(H.f)(d(n.data));case 7:r.next=13;break;case 9:return r.prev=9,r.t0=r.catch(1),r.next=13,Object(H.f)({type:"SAGA_FETCH_USER_FAIL"});case 13:case"end":return r.stop()}}),G,null,[[1,9]])}function Y(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.k)("SAGA_FETCH_USER_INIT",Q);case 2:case"end":return e.stop()}}),M)}function Z(e){var t,n,r,a;return L.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,c.t0=H.g,c.next=5,Object(H.a)(f,t);case 5:return c.t1=c.sent,c.t2=Object(H.d)(1e3),c.t3={user:c.t1,timeout:c.t2},c.next=10,(0,c.t0)(c.t3);case 10:if(n=c.sent,r=n.user,a=n.timeout,!r){c.next=17;break}return console.log("no timeout"),c.next=17,Object(H.f)(d(r.data));case 17:if(!a){c.next=21;break}return console.log("timeout"),c.next=21,Object(H.f)({type:"SAGA_FETCH_USER_TIMEOUT_ERROR"});case 21:c.next=27;break;case 23:return c.prev=23,c.t4=c.catch(1),c.next=27,Object(H.f)({type:"SAGA_FETCH_USER_FAIL"});case 27:case"end":return c.stop()}}),P,null,[[1,23]])}function ee(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.k)("SAGA_FETCH_USER_WITH_TIMEOUT_INIT",Z);case 2:case"end":return e.stop()}}),X)}function te(e){var t;return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(H.h)();case 2:t=n.sent,console.log("[logger] action",e),console.log("[logger] state after",t);case 5:case"end":return n.stop()}}),D)}function ne(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.k)("*",te);case 2:case"end":return e.stop()}}),V)}function re(){var e;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=0;case 1:if(!(e<3)){t.next=7;break}return t.next=4,Object(H.j)("SAGA_FETCH_USER_SUCCESS");case 4:e++,t.next=1;break;case 7:console.log("[watchFirstThreeFetches] The three first users where successfully fetched");case 8:case"end":return t.stop()}}),K)}function ae(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(H.j)("SAGA_FETCH_USER_INIT");case 3:return console.log("[fetchFlow] initialized fetching"),e.next=6,Object(H.j)("SAGA_FETCH_USER_SUCCESS");case 6:return console.log("[fetchFlow] fetching success"),e.next=9,Object(H.j)("SAGA_FETCH_USER_FAIL");case 9:console.log("[fetchFlow] fetching error"),e.next=0;break;case 12:case"end":return e.stop()}}),W)}function ce(e){var t,n,r,a,c,s;return L.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.firstUserUrl,r=t.secondUserUrl,o.t0=H.g,o.next=6,Object(H.a)(f,n);case 6:return o.t1=o.sent,o.next=9,Object(H.a)(f,r);case 9:return o.t2=o.sent,o.t3={firstUser:o.t1,secondUser:o.t2},o.next=13,(0,o.t0)(o.t3);case 13:if(a=o.sent,c=a.firstUser,s=a.secondUser,!c){o.next=21;break}return o.next=19,Object(H.f)({type:"FIRST_USER_WINS"});case 19:return o.next=21,Object(H.f)(d(c.data));case 21:if(!s){o.next=26;break}return o.next=24,Object(H.f)({type:"SECOND_USER_WINS"});case 24:return o.next=26,Object(H.f)(d(s.data));case 26:case"end":return o.stop()}}),J)}function se(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.k)("SAGA_FETCH_TWO_USERS_RACE",ce);case 2:case"end":return e.stop()}}),q)}function oe(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(H.d)(3e3);case 3:return e.next=5,Object(H.f)({type:"EXPENSIVE_TASK_COMPLETED"});case 5:return e.prev=5,e.next=8,Object(H.c)();case 8:if(!e.sent){e.next=11;break}return e.next=11,Object(H.f)({type:"EXPENSIVE_TASK_CANCELED"});case 11:return e.finish(5);case 12:case"end":return e.stop()}}),z,null,[[0,,5,12]])}function ie(){var e;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(H.j)("EXPENSIVE_TASK_INIT");case 2:if(!t.sent){t.next=12;break}return t.next=5,Object(H.e)(oe);case 5:return e=t.sent,t.next=8,Object(H.j)("EXPENSIVE_TASK_CANCEL");case 8:return t.next=10,Object(H.b)(e);case 10:t.next=0;break;case 12:case"end":return t.stop()}}),B)}function ue(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.i)(Y);case 2:return e.next=4,Object(H.i)(ee);case 4:return e.next=6,Object(H.i)(ne);case 6:return e.next=8,Object(H.i)(re);case 8:return e.next=10,Object(H.i)(ae);case 10:return e.next=12,Object(H.i)(se);case 12:return e.next=14,Object(H.i)(ie);case 14:case"end":return e.stop()}}),$)}var le=ue,Ee=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||h.c,pe=Object(T.a)(),fe=Object(h.d)(R,Ee(Object(h.a)(pe,x.a)));pe.run(le);var _e=fe,de=a.a.createElement(p.a,{store:_e},a.a.createElement(b,null));s.a.render(de,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[46,1,2]]]);
//# sourceMappingURL=main.9033689e.chunk.js.map